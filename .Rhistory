library(ggplot2)  # plots
library(scales)   # used in ggplot()
library(xlsx)     # read excel files
library(sm)       # density plots
load("growth.rsav")         # 5-yr average population growth in cities w. pop > 750k (as reported)
load("growth.melt.rsav")    # "" melted
load("pop.rsav")            # 5-yr average population in cities w. pop > 750k (as reported)
load("pop.melt.rsav")       # "" melted
load("growth.decadal.rsav")  # 10-yr population growth (computed for '50-60, ..., '10-20)
load("growth.decadal2.rsav") # 10-yr population growth (computed for '55-65, ..., '15-25)
load("cities.rsav") # synthesized population and growth rate data for global cities with pop > 750k
load("epochal.rsav") # "cities" summarized by 25-yr epoch
## function to create Figure/Table numbers
incCount <- function(inObj, useName) {
nObj <- length(inObj)
useNum <- max(inObj) + 1
inObj <- c(inObj, useNum)
names(inObj)[nObj + 1] <- useName
inObj
}
figCount <- c(`_` = 0)
tableCount <- c(`_` = 0)
## Use like this:
# figCounts <- incCount(figCount, "f.randomFigure")
# function to check for NAs and complete cases
check<-function(df){
NAs<-sum(is.na(df))
print(paste("NAs:", NAs)) # count NA's
if (NAs>0) df1[which(is.na(df)), ] # Show NA's, if any.
cc<-complete.cases(df)  # check for missing values...
print(paste("Complete Cases:", all(cc)))  # Given a set of logical vectors, are all of the values true?
}
# base map
world <- map_data("world")
worldmap <- ggplot(world, aes(x=long, y=lat, group=group)) +
geom_path()
ggplot() +
geom_path(data=world, aes(x=long, y=lat, group=group)) +
#   geom_ribbon(data=world, x=world$long, ymin=-23.45, ymax= 23.45, alpha=0.3, fill="green") +
#   geom_ribbon(data=world, x=world$long, ymin=-38, ymax=-23.45, alpha=0.3, fill="blue") +
#   geom_ribbon(data=world, x=world$long, ymin= 23.45, ymax= 38, alpha=0.3, fill="blue") +
geom_hline(y=-23.45, linetype=2) +
geom_hline(y= 23.45, linetype=2) +
geom_hline(y=-38, linetype=3) +
geom_hline(y=38, linetype=3) +
geom_point(data=subset(cities, Period=="2010-2015"), aes(x=Longitude, y=Latitude, colour=Growth.Quartile, size=Pop./10^3)) +
#coord_equal() +
scale_y_continuous(breaks=(-2:2) * 30) +
scale_x_continuous(breaks=(-4:4) * 45) +
labs(colour = 'Urbanization Rate', size="Population (Millions)", title="Rapid Urbanization Throughout the Tropics and Sub-Tropics") +
theme_bw() +
scale_color_brewer(palette="Reds") +
scale_size(range = c(2, 10))
str(cities)
decadal<-ddply(cities, .(Continent, Country.Code, Country, City.Code, Urban.Agglomeration, Latitude, Longitude, numcolwise(mean)))
decadal<-ddply(cities, .(Continent, Country.Code, Country, City.Code, Urban.Agglomeration, Latitude, Longitude), numcolwise(mean))
str(decadal)
dim(cities)
dim(decadal)
decadal<-ddply(cities, .(Continent, Country.Code, Country, City.Code, Urban.Agglomeration, Latitude, Longitude, decade), numcolwise(mean))
dim(decadal)
dim(decadal)[1]*2
dim(cities)
str(decadal)
hist(decadal$Growth)
summary(decadal$Growth)
ggplot() +
geom_path(data=world, aes(x=long, y=lat, group=group)) +
geom_point(data=decadal, aes(x=Longitude, y=Latitude, colour=Growth, size=Pop./10^3)) +
facet_wrap(~decade) +
coord_equal() +
scale_y_continuous(breaks=(-2:2) * 30) +
scale_x_continuous(breaks=(-4:4) * 45) +
labs(colour = 'Average Annual Poplution Growth Rate', size="Population (Millions)") +
theme_bw()
ggplot() +
geom_path(data=world, aes(x=long, y=lat, group=group)) +
geom_point(data=decadal, aes(x=Longitude, y=Latitude, colour=Growth, size=Pop./10^3)) +
facet_wrap(~decade, nrow=length(levels(cities$decade))/4) +
coord_equal() +
scale_y_continuous(breaks=(-2:2) * 30) +
scale_x_continuous(breaks=(-4:4) * 45) +
labs(colour = 'Poplution Growth Rate', size="Population (Millions)") +
theme_bw() +
scale_color_brewer(palette="Reds")
length(levels(cities$decade)
)
length(levels(factor(cities$decade)))
ggplot() +
geom_path(data=world, aes(x=long, y=lat, group=group)) +
geom_point(data=decadal, aes(x=Longitude, y=Latitude, colour=Growth, size=Pop./10^3)) +
facet_wrap(~decade, nrow=length(levels(factor(cities$decade)))/4) +
coord_equal() +
scale_y_continuous(breaks=(-2:2) * 30) +
scale_x_continuous(breaks=(-4:4) * 45) +
labs(colour = 'Poplution Growth Rate', size="Population (Millions)") +
theme_bw() +
scale_color_brewer(palette="Reds")
quantile(decadal$Growth)
str(decadal)
quantile(decadal$Growth, probs=c(0.05, 1))
hist(decadal$Growth)
ggplot() +
geom_path(data=world, aes(x=long, y=lat, group=group)) +
geom_point(data=decadal, aes(x=Longitude, y=Latitude, colour=Growth, size=Pop./10^3)) +
facet_wrap(~decade, nrow=length(levels(factor(cities$decade)))/4) +
coord_equal() +
scale_y_continuous(breaks=(-2:2) * 30) +
scale_x_continuous(breaks=(-4:4) * 45) +
labs(colour = 'Poplution Growth Rate', size="Population (Millions)") +
theme_bw() +
scale_colour_gradient(limits=c(-5, 30), low="white", high="red", space="Lab")
ggplot() +
geom_path(data=world, aes(x=long, y=lat, group=group, lwd=0.2)) +
geom_point(data=decadal, aes(x=Longitude, y=Latitude, colour=Growth, size=Pop./10^3)) +
facet_wrap(~decade, nrow=length(levels(factor(cities$decade)))/2) +
coord_equal() +
scale_y_continuous(breaks=(-2:2) * 30) +
scale_x_continuous(breaks=(-4:4) * 45) +
labs(colour = 'Poplution Growth Rate', size="Population (Millions)") +
theme_bw() +
scale_colour_gradient(limits=quantile(decadal$Growth, probs=c(0.01, 0.99)), low="white", high="red", space="Lab")
ggplot() +
geom_path(data=world, aes(x=long, y=lat, size=0.1)) +
geom_point(data=decadal, aes(x=Longitude, y=Latitude, colour=Growth, size=Pop./10^3)) +
facet_wrap(~decade, nrow=length(levels(factor(decadal$decade)))/2) +
coord_equal() +
scale_y_continuous(breaks=(-2:2) * 30) +
scale_x_continuous(breaks=(-4:4) * 45) +
labs(colour = 'Annual Average Poplution Growth Rate (%)', size="Population (Millions)") +
theme_bw() +
scale_colour_gradient(limits=quantile(decadal$Growth, probs=c(0.01, 0.99)), low="white", high="red", space="Lab")
ggplot() +
geom_path(data=world, aes(x=long, y=lat, group=group size=0.1))
ggplot() +
geom_path(data=world, aes(x=long, y=lat, group=group, size=0.1))
ggplot() +
geom_path(data=world, aes(x=long, y=lat, group=group))
ggplot() +
geom_path(data=world, aes(x=long, y=lat, group=group)) +
geom_point(data=decadal, aes(x=Longitude, y=Latitude, colour=Growth, size=Pop./10^3)) +
facet_wrap(~decade, nrow=length(levels(factor(decadal$decade)))/2) +
coord_equal() +
scale_y_continuous(breaks=(-2:2) * 30) +
scale_x_continuous(breaks=(-4:4) * 45) +
labs(colour = 'Annual Average Poplution Growth Rate (%)', size="Population (Millions)") +
theme_bw() +
scale_colour_gradient(limits=quantile(decadal$Growth, probs=c(0.01, 0.99)), low="white", high="red", space="Lab")
ggplot() +
geom_path(data=world, aes(x=long, y=lat, group=group, size=0.1)) +
geom_point(data=decadal, aes(x=Longitude, y=Latitude, colour=Growth, size=Pop./10^3)) +
facet_wrap(~decade, nrow=length(levels(factor(decadal$decade)))/2) +
coord_equal() +
scale_y_continuous(breaks=(-2:2) * 30) +
scale_x_continuous(breaks=(-4:4) * 45) +
labs(colour = 'Annual Population Growth (%)', size="Population (Millions)") +
theme_bw() +
scale_colour_gradient(limits=quantile(decadal$Growth, probs=c(0.05, 0.95)), low="pink", high="red", space="Lab")
str(world)
mapWorld <- borders("world", colour="gray50", fill="gray50")
mapWorld
ggplot() +
geom_path(data=world, aes(x=long, y=lat, group=group)) +
mapWorld +
)
ggplot() +
geom_path(data=world, aes(x=long, y=lat, group=group)) +
mapWorld
ggplot() +
geom_path(data=world, aes(x=long, y=lat, group=group)) +
mapWorld +
geom_point(data=decadal, aes(x=Longitude, y=Latitude, colour=Growth, size=Pop./10^3)) +
facet_wrap(~decade, nrow=length(levels(factor(decadal$decade)))/2) +
coord_equal() +
scale_y_continuous(breaks=(-2:2) * 30) +
scale_x_continuous(breaks=(-4:4) * 45) +
labs(colour = 'Annual Population Growth (%)', size="Population (Millions)") +
theme_bw() +
scale_colour_gradient(limits=quantile(decadal$Growth, probs=c(0.05, 0.95)), low="pink", high="red", space="Lab")
ggplot() +
geom_path(data=world, aes(x=long, y=lat, group=group)) +
mapWorld +
geom_point(data=decadal, aes(x=Longitude, y=Latitude, colour=Growth, size=Pop./10^3)) +
facet_wrap(~decade, nrow=length(levels(factor(decadal$decade)))/2) +
coord_equal() +
scale_y_continuous(breaks=(-2:2) * 30) +
scale_x_continuous(breaks=(-4:4) * 45) +
labs(colour = 'Annual Population Growth (%)', size="Population (Millions)") +
theme_bw() +
scale_colour_gradient(low="white", high="red", space="Lab")
ggplot() +
geom_path(data=world, aes(x=long, y=lat, group=group)) +
mapWorld +
geom_point(data=decadal, aes(x=Longitude, y=Latitude, colour=Growth, size=Pop./10^3)) +
facet_wrap(~decade, nrow=length(levels(factor(decadal$decade)))/2) +
coord_equal() +
scale_y_continuous(breaks=(-2:2) * 30) +
scale_x_continuous(breaks=(-4:4) * 45) +
labs(colour = 'Annual Population Growth (%)', size="Population (Millions)") +
theme_bw() +
scale_colour_gradient(palette="reds")
ggplot() +
geom_path(data=world, aes(x=long, y=lat, group=group)) +
mapWorld +
geom_point(data=decadal, aes(x=Longitude, y=Latitude, colour=Growth, size=Pop./10^3)) +
facet_wrap(~decade, nrow=length(levels(factor(decadal$decade)))/2) +
coord_equal() +
scale_y_continuous(breaks=(-2:2) * 30) +
scale_x_continuous(breaks=(-4:4) * 45) +
labs(colour = 'Annual Population Growth (%)', size="Population (Millions)") +
theme_bw() +
scale_colour_gradient(low="white", high="red")
ggplot() +
geom_path(data=world, aes(x=long, y=lat, group=group)) +
mapWorld +
geom_point(data=decadal, aes(x=Longitude, y=Latitude, colour=Growth, size=Pop./10^3)) +
facet_wrap(~decade, nrow=length(levels(factor(decadal$decade)))/2) +
coord_equal() +
scale_y_continuous(breaks=(-2:2) * 30) +
scale_x_continuous(breaks=(-4:4) * 45) +
labs(colour = 'Annual Population Growth (%)', size="Population (Millions)") +
theme_bw() +
scale_colour_gradient(low="blue", high="red")
source('~/.active-rstudio-document', echo=TRUE)
ggplot() +
geom_path(data=world, aes(x=long, y=lat, group=group, size=0.1)) +
#   geom_ribbon(data=world, x=world$long, ymin=-23.45, ymax= 23.45, alpha=0.3, fill="green") +
#   geom_ribbon(data=world, x=world$long, ymin=-38, ymax=-23.45, alpha=0.3, fill="blue") +
#   geom_ribbon(data=world, x=world$long, ymin= 23.45, ymax= 38, alpha=0.3, fill="blue") +
geom_hline(y=-23.45, linetype=2) +
geom_hline(y= 23.45, linetype=2) +
geom_hline(y=-38, linetype=3) +
geom_hline(y=38, linetype=3) +
geom_point(data=subset(cities, Period=="2010-2015"), aes(x=Longitude, y=Latitude, colour=Growth.Quartile, size=Pop./10^3)) +
#coord_equal() +
scale_y_continuous(breaks=(-2:2) * 30) +
scale_x_continuous(breaks=(-4:4) * 45) +
labs(colour = 'Urbanization Rate', size="Population (Millions)", title="Rapid Urbanization Throughout the Tropics and Sub-Tropics") +
theme_bw() +
scale_color_brewer(palette="Reds") +
scale_size(range = c(2, 10))
ggplot() +
geom_path(data=world, alpha=0.2, aes(x=long, y=lat, group=group))
ggplot() +
geom_path(data=world, alpha=0.2, aes(x=long, y=lat, group=group)) +
#   geom_ribbon(data=world, x=world$long, ymin=-23.45, ymax= 23.45, alpha=0.3, fill="green") +
#   geom_ribbon(data=world, x=world$long, ymin=-38, ymax=-23.45, alpha=0.3, fill="blue") +
#   geom_ribbon(data=world, x=world$long, ymin= 23.45, ymax= 38, alpha=0.3, fill="blue") +
geom_hline(y=-23.45, linetype=2) +
geom_hline(y= 23.45, linetype=2) +
geom_hline(y=-38, linetype=3) +
geom_hline(y=38, linetype=3) +
geom_point(data=subset(cities, Period=="2010-2015"), aes(x=Longitude, y=Latitude, colour=Growth.Quartile, size=Pop./10^3)) +
#coord_equal() +
scale_y_continuous(breaks=(-2:2) * 30) +
scale_x_continuous(breaks=(-4:4) * 45) +
labs(colour = 'Urbanization Rate', size="Population (Millions)", title="Rapid Urbanization Throughout the Tropics and Sub-Tropics") +
theme_bw() +
scale_color_brewer(palette="Reds") +
scale_size(range = c(2, 10))
ggplot() +
geom_path(data=world, alpha=0.2, aes(x=long, y=lat, group=group)) +
geom_ribbon(data=world, x=world$long, ymin=-23.45, ymax= 23.45, alpha=0.3, fill="green") +
geom_ribbon(data=world, x=world$long, ymin=-38, ymax=-23.45, alpha=0.3, fill="blue") +
geom_ribbon(data=world, x=world$long, ymin= 23.45, ymax= 38, alpha=0.3, fill="blue") +
#   geom_hline(y=-23.45, linetype=2) +
#   geom_hline(y= 23.45, linetype=2) +
#   geom_hline(y=-38, linetype=3) +
#   geom_hline(y=38, linetype=3) +
geom_point(data=subset(cities, Period=="2010-2015"), aes(x=Longitude, y=Latitude, colour=Growth.Quartile, size=Pop./10^3)) +
#coord_equal() +
scale_y_continuous(breaks=(-2:2) * 30) +
scale_x_continuous(breaks=(-4:4) * 45) +
labs(colour = 'Urbanization Rate', size="Population (Millions)", title="Rapid Urbanization Throughout the Tropics and Sub-Tropics") +
theme_bw() +
scale_color_brewer(palette="Reds") +
scale_size(range = c(2, 10))
ggplot() +
geom_path(data=world, alpha=0.3, size=0.3, aes(x=long, y=lat, group=group))
ggplot() +
geom_path(data=world, alpha=0.3, size=2, aes(x=long, y=lat, group=group))
ggplot() +
geom_path(data=world, alpha=0.3, size=1, aes(x=long, y=lat, group=group))
ggplot() +
geom_path(data=world, alpha=0.5, size=0.1, aes(x=long, y=lat, group=group))
ggplot() +
geom_path(data=world, alpha=0.5, size=0.1, aes(x=long, y=lat, group=group)) +
#   geom_ribbon(data=world, x=world$long, ymin=-23.45, ymax= 23.45, alpha=0.3, fill="green") +
#   geom_ribbon(data=world, x=world$long, ymin=-38, ymax=-23.45, alpha=0.3, fill="blue") +
#   geom_ribbon(data=world, x=world$long, ymin= 23.45, ymax= 38, alpha=0.3, fill="blue") +
geom_hline(y=-23.45, linetype=2, size=0.2) +
geom_hline(y= 23.45, linetype=2, size=0.2) +
geom_hline(y=-38, linetype=3, size=0.2) +
geom_hline(y=38, linetype=3, size=0.2) +
geom_point(data=subset(cities, Period=="2010-2015"), aes(x=Longitude, y=Latitude, colour=Growth.Quartile, size=Pop./10^3)) +
#coord_equal() +
scale_y_continuous(breaks=(-2:2) * 30) +
scale_x_continuous(breaks=(-4:4) * 45) +
labs(colour = 'Urbanization Rate', size="Population (Millions)", title="Rapid Urbanization Throughout the Tropics and Sub-Tropics") +
theme_bw() +
scale_color_brewer(palette="Reds") +
scale_size(range = c(2, 10))
ggplot() +
geom_path(data=world, alpha=0.8, size=0.2, aes(x=long, y=lat, group=group)) +
#   geom_ribbon(data=world, x=world$long, ymin=-23.45, ymax= 23.45, alpha=0.3, fill="green") +
#   geom_ribbon(data=world, x=world$long, ymin=-38, ymax=-23.45, alpha=0.3, fill="blue") +
#   geom_ribbon(data=world, x=world$long, ymin= 23.45, ymax= 38, alpha=0.3, fill="blue") +
geom_hline(y=-23.45, linetype=2, size=0.2) +
geom_hline(y= 23.45, linetype=2, size=0.2) +
geom_hline(y=-38, linetype=3, size=0.2) +
geom_hline(y=38, linetype=3, size=0.2) +
geom_point(data=subset(cities, Period=="2010-2015"), aes(x=Longitude, y=Latitude, colour=Growth.Quartile, size=Pop./10^3)) +
#coord_equal() +
scale_y_continuous(breaks=(-2:2) * 30) +
scale_x_continuous(breaks=(-4:4) * 45) +
labs(colour = 'Urbanization Rate', size="Population (Millions)", title="Rapid Urbanization Throughout the Tropics and Sub-Tropics") +
theme_bw() +
scale_color_brewer(palette="Reds") +
scale_size(range = c(2, 10))
ggplot() +
geom_path(data=world, alpha=0.2, size=0.2, aes(x=long, y=lat, group=group)) +
#   geom_ribbon(data=world, x=world$long, ymin=-23.45, ymax= 23.45, alpha=0.3, fill="green") +
#   geom_ribbon(data=world, x=world$long, ymin=-38, ymax=-23.45, alpha=0.3, fill="blue") +
#   geom_ribbon(data=world, x=world$long, ymin= 23.45, ymax= 38, alpha=0.3, fill="blue") +
geom_hline(y=-23.45, linetype=2, size=0.2) +
geom_hline(y= 23.45, linetype=2, size=0.2) +
geom_hline(y=-38, linetype=3, size=0.2) +
geom_hline(y=38, linetype=3, size=0.2) +
geom_point(data=subset(cities, Period=="2010-2015"), aes(x=Longitude, y=Latitude, colour=Growth.Quartile, size=Pop./10^3)) +
coord_equal() +
scale_y_continuous(breaks=(-2:2) * 30) +
scale_x_continuous(breaks=(-4:4) * 45) +
labs(colour = 'Urbanization Rate', size="Population (Millions)", title="Rapid Urbanization Throughout the Tropics and Sub-Tropics") +
theme_bw() +
scale_color_brewer(palette="Reds") +
scale_size(range = c(2, 10))
ggplot() +
geom_path(data=world, alpha=0.2, size=0.2, aes(x=long, y=lat, group=group)) +
#   geom_ribbon(data=world, x=world$long, ymin=-23.45, ymax= 23.45, alpha=0.3, fill="green") +
#   geom_ribbon(data=world, x=world$long, ymin=-38, ymax=-23.45, alpha=0.3, fill="blue") +
#   geom_ribbon(data=world, x=world$long, ymin= 23.45, ymax= 38, alpha=0.3, fill="blue") +
geom_hline(y=-23.45, linetype=2, size=0.2) +
geom_hline(y= 23.45, linetype=2, size=0.2) +
geom_hline(y=-38, linetype=3, size=0.2) +
geom_hline(y=38, linetype=3, size=0.2) +
geom_point(data=subset(cities, Period=="2010-2015"), aes(x=Longitude, y=Latitude, colour=Growth.Quartile, size=Pop./10^3)) +
#   coord_equal() +
scale_y_continuous(breaks=(-2:2) * 30) +
scale_x_continuous(breaks=(-4:4) * 45) +
labs(colour = 'Urbanization Rate', size="Population (Millions)", title="Rapid Urbanization Throughout the Tropics and Sub-Tropics") +
theme_bw() +
scale_color_brewer(palette="Reds")
ggplot() +
geom_path(data=world, alpha=0.5, size=0.2, aes(x=long, y=lat, group=group)) +
#   geom_ribbon(data=world, x=world$long, ymin=-23.45, ymax= 23.45, alpha=0.3, fill="green") +
#   geom_ribbon(data=world, x=world$long, ymin=-38, ymax=-23.45, alpha=0.3, fill="blue") +
#   geom_ribbon(data=world, x=world$long, ymin= 23.45, ymax= 38, alpha=0.3, fill="blue") +
geom_hline(y=-23.45, linetype=2, size=0.2) +
geom_hline(y= 23.45, linetype=2, size=0.2) +
geom_hline(y=-38, linetype=3, size=0.2) +
geom_hline(y=38, linetype=3, size=0.2) +
geom_point(data=subset(cities, Period=="2010-2015"), aes(x=Longitude, y=Latitude, colour=Growth.Quartile, size=Pop./10^3)) +
#   coord_equal() +
scale_y_continuous(breaks=(-2:2) * 30) +
scale_x_continuous(breaks=(-4:4) * 45) +
labs(colour = 'Urbanization Rate', size="Population (Millions)", title="Rapid Urbanization Throughout the Tropics and Sub-Tropics") +
theme_bw() +
scale_color_brewer(palette="Reds") +
scale_size(range = c(2, 10))
ggplot() +
geom_path(data=world, alpha=0.5, size=0.2, aes(x=long, y=lat, group=group)) +
#   geom_ribbon(data=world, x=world$long, ymin=-23.45, ymax= 23.45, alpha=0.3, fill="green") +
#   geom_ribbon(data=world, x=world$long, ymin=-38, ymax=-23.45, alpha=0.3, fill="blue") +
#   geom_ribbon(data=world, x=world$long, ymin= 23.45, ymax= 38, alpha=0.3, fill="blue") +
geom_hline(y=-23.45, linetype=2, size=0.2) +
geom_hline(y= 23.45, linetype=2, size=0.2) +
geom_hline(y=-38, linetype=3, size=0.2) +
geom_hline(y=38, linetype=3, size=0.2) +
geom_point(data=subset(cities, Period=="2010-2015"), aes(x=Longitude, y=Latitude, colour=Growth.Quartile, size=Pop./10^3)) +
#   coord_equal() +
scale_y_continuous(breaks=(-2:2) * 30) +
scale_x_continuous(breaks=(-4:4) * 45) +
labs(colour = 'Urbanization Rate', size="Population (Millions)", title="Rapid Urbanization Throughout the Tropics and Sub-Tropics") +
theme_bw() +
scale_color_brewer(palette="Reds")
decadal<-ddply(cities, .(Continent, Country.Code, Country, City.Code, Urban.Agglomeration, Latitude, Longitude, decade), numcolwise(mean))
mapWorld <- borders("world", colour="gray40", fill="gray40")
ggplot() +
geom_path(data=world, aes(x=long, y=lat, group=group)) +
mapWorld +
geom_point(data=decadal, aes(x=Longitude, y=Latitude, colour=Growth, size=Pop./10^3)) +
facet_wrap(~decade, nrow=length(levels(factor(decadal$decade)))/2) +
coord_equal() +
scale_y_continuous(breaks=(-2:2) * 30) +
scale_x_continuous(breaks=(-4:4) * 45) +
labs(colour = 'Annual Population Growth (%)', size="Population (Millions)") +
theme_bw() +
scale_colour_gradient(low="white", high="red")
levels(decadal$decade)
decadal$decade<-factor(decadal$decade, levels=c("Fifties", "Sixties", "Seventies", "Eighties", "Nineties", "Oughts", "Twenty-Teens", "Twenty-Twenties"))
levels(decadal$decade)
mapWorld <- borders("world", colour="gray40", fill="gray40")
ggplot() +
geom_path(data=world, aes(x=long, y=lat, group=group)) +
mapWorld +
geom_point(data=decadal, aes(x=Longitude, y=Latitude, colour=Growth, size=Pop./10^3)) +
facet_wrap(~decade, nrow=length(levels(factor(decadal$decade)))/2) +
coord_equal() +
scale_y_continuous(breaks=(-2:2) * 30) +
scale_x_continuous(breaks=(-4:4) * 45) +
labs(colour = 'Annual Population Growth (%)', size="Population (Millions)") +
theme_bw() +
scale_colour_gradient(low="white", high="red")
range(decadal$Growth)
str(decadal)
range(decadal$Pop.)
quantile(decadal$Pop., probs=c(0.05, 0.95))
ggplot() +
geom_path(data=world, aes(x=long, y=lat, group=group)) +
mapWorld +
geom_point(data=decadal, aes(x=Longitude, y=Latitude, colour=Growth, size=Pop./10^3)) +
facet_wrap(~decade, nrow=length(levels(factor(decadal$decade)))/2) +
coord_equal() +
scale_y_continuous(breaks=(-2:2) * 30) +
scale_x_continuous(breaks=(-4:4) * 45) +
labs(colour = 'Annual Population Growth (%)', size="Population (Millions)") +
theme_bw() +
scale_colour_gradient(low="white", high="red") +
scale_size(range = quantile(decadal$Pop., probs=c(0.05, 0.95))/1000)
quantile(decadal$Growth, probs=c(0.05, 0.95))
quantile(decadal$Growth, probs=c(0.05, 0.99))
ggplot() +
geom_path(data=world, aes(x=long, y=lat, group=group)) +
mapWorld +
geom_point(data=decadal, aes(x=Longitude, y=Latitude, colour=Growth, size=Pop./10^3)) +
facet_wrap(~decade, nrow=length(levels(factor(decadal$decade)))/2) +
coord_equal() +
scale_y_continuous(breaks=(-2:2) * 30) +
scale_x_continuous(breaks=(-4:4) * 45) +
labs(colour = 'Annual Population Growth (%)', size="Population (Millions)") +
theme_bw() +
scale_size(range = quantile(decadal$Pop., probs=c(0.05, 0.95))/1000)
+ scale_colour_gradient(low="white", high="red", limits=quantile(decadal$Growth, probs=c(0.05, 0.99)))
ggplot() +
geom_path(data=world, aes(x=long, y=lat, group=group)) +
mapWorld +
geom_point(data=decadal, aes(x=Longitude, y=Latitude, colour=Growth, size=Pop./10^3)) +
facet_wrap(~decade, nrow=length(levels(factor(decadal$decade)))/2) +
coord_equal() +
scale_y_continuous(breaks=(-2:2) * 30) +
scale_x_continuous(breaks=(-4:4) * 45) +
labs(colour = 'Annual Population Growth (%)', size="Population (Millions)") +
theme_bw() +
scale_size(range = quantile(decadal$Pop., probs=c(0.05, 0.95))/1000) +
scale_colour_gradient(low="white", high="red", limits=quantile(decadal$Growth, probs=c(0.05, 0.99)))
ggplot() +
geom_path(data=world, aes(x=long, y=lat, group=group)) +
mapWorld +
geom_point(data=decadal, aes(x=Longitude, y=Latitude, colour=Growth, size=Pop./10^3)) +
facet_wrap(~decade, nrow=length(levels(factor(decadal$decade)))/2) +
coord_equal() +
scale_y_continuous(breaks=(-2:2) * 30) +
scale_x_continuous(breaks=(-4:4) * 45) +
labs(colour = 'Annual Population Growth (%)', size="Population (Millions)") +
theme_bw() +
scale_size(range = quantile(decadal$Pop., probs=c(0.05, 0.95))/500) +
scale_colour_gradient(low="white", high="red", limits=quantile(decadal$Growth, probs=c(0.05, 0.99)))
ggplot() +
geom_path(data=world, aes(x=long, y=lat, group=group)) +
mapWorld +
geom_point(data=decadal, aes(x=Longitude, y=Latitude, colour=Growth, size=Pop./10^3)) +
facet_wrap(~decade, nrow=length(levels(factor(decadal$decade)))/2) +
coord_equal() +
scale_y_continuous(breaks=(-2:2) * 30) +
scale_x_continuous(breaks=(-4:4) * 45) +
labs(colour = 'Annual Population Growth (%)', size="Population (Millions)") +
theme_bw() +
scale_size(range = quantile(decadal$Pop., probs=c(0.05, 0.95))/500) +
scale_colour_gradient(low="white", high="red", limits=quantile(decadal$Growth, probs=c(0.05, 1)))
ggplot() +
geom_path(data=world, aes(x=long, y=lat, group=group)) +
mapWorld +
geom_point(data=decadal, aes(x=Longitude, y=Latitude, colour=Growth, size=Pop./10^3)) +
facet_wrap(~decade, nrow=length(levels(factor(decadal$decade)))/2) +
coord_equal() +
scale_y_continuous(breaks=(-2:2) * 30) +
scale_x_continuous(breaks=(-4:4) * 45) +
labs(colour = 'Annual Population Growth (%)', size="Population (Millions)") +
theme_bw() +
scale_size(range = quantile(decadal$Pop., probs=c(0.0, 1))/500) +
scale_colour_gradient(low="white", high="red", limits=quantile(decadal$Growth, probs=c(0.0, 1)))
quantile(decadal$Pop., probs=c(0.0, 1))/500)
quantile(decadal$Pop., probs=c(0.0, 1)/500)
ggplot() +
geom_path(data=world, aes(x=long, y=lat, group=group)) +
mapWorld +
geom_point(data=decadal, aes(x=Longitude, y=Latitude, colour=Growth, size=Pop./10^3)) +
facet_wrap(~decade, nrow=length(levels(factor(decadal$decade)))/2) +
coord_equal() +
scale_y_continuous(breaks=(-2:2) * 30) +
scale_x_continuous(breaks=(-4:4) * 45) +
labs(colour = 'Annual Population Growth (%)', size="Population (Millions)") +
theme_bw() +
scale_size(range = quantile(decadal$Pop., probs=c(0.0, 1)/500)) +
scale_colour_gradient(low="white", high="red", limits=quantile(decadal$Growth, probs=c(0.0, 1)))
sysDate()
system.Date()
??Date
Sys.Time()
Sys.time()
Sys.date()
Sys.time()
